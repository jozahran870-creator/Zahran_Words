/* === Helpers === */
function $q(sel, root=document){ return root.querySelector(sel); }
function $qa(sel, root=document){ return Array.from(root.querySelectorAll(sel)); }
/* === Inject minimal CSS so buttons look & react === */
(function injectCSS(){
  if ($q('#auto-style-game')) return;
  const css = `
    #grid {
      display: grid;
      grid-template-columns: repeat(5, minmax(60px, 1fr)); /* ٥ أعمدة */
      grid-template-rows: repeat(5, minmax(60px, 1fr));   /* ٥ صفوف */
      gap: 8px;
      margin-top: 8px;
    }
    .cell {
      user-select: none;
      pointer-events: auto;
      outline: none;
      border: 0;
      padding: 12px;
      border-radius: 14px;
      font-size: 26px;
      font-weight: 800;
      background: #f3f3f3;
      box-shadow: 0 2px 0 rgba(0,0,0,.25);
      transition: .15s;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    .cell:hover { transform: translateY(-1px); }
    .cell.selected { outline: 3px solid #111; transform: scale(.97); }
    .cell.locked {
      background: #cfd8dc;
      color: #455a64;
      opacity: .85;
      box-shadow: none;
    }
    .cell:disabled { cursor: default; }
    .pick-1{background:#fffbe6}
    .pick-2{background:#fff3cd}
    .pick-3{background:#ffe8a1}
    .pick-4{background:#ffd180}
    .pick-5{background:#ffab91}
    .pick-6{background:#ff8a80}
    .pick-7{background:#ff5252}
    .pick-8{background:#ff1744}
    .pick-9{background:#ff5252}
    .pick-10{background:#ffe57f}
    #controls {
      display:flex;
      gap:10px;
      align-items:center;
      margin-top:12px;
      flex-wrap:wrap;
    }
    #checkBtn {
      padding:14px 28px;
      font-size:22px;
      font-weight:800;
      background:linear-gradient(90deg,#ffeb3b,#e53935);
      color:#111;
      border:2px solid #111;
      border-radius:12px;
      cursor:pointer;
    }
    #cancelBtn {
      padding:14px 28px;
      font-size:22px;
      font-weight:800;
      background:#fff;
      color:#111;
      border:2px solid #111;
      border-radius:12px;
      cursor:pointer;
    }
  `;
  const style = document.createElement('style');
  style.id = 'auto-style-game';
  style.textContent = css;
  document.head.appendChild(style);
})();
// بدل advanceColor
function toggleCell(btn){
  btn.classList.toggle('selected');
}
function advanceColor(btn){
  let step = parseInt(btn.dataset.step||'0',10);
  COLOR_CLASSES.forEach(c=>btn.classList.remove(c));
  btn.classList.add(COLOR_CLASSES[step % COLOR_CLASSES.length]);
  btn.dataset.step = (step+1).toString();
}













const LEVELS = [
  { 
    words:["محمدصلاح","أهداف","مهاجم","ليفربول"], 
    letters:[
      'م','ح','م','د','أ',
      'ل','ي','ف','ص','ه',
      'م','ه','ر','ل','د',
      'ج','ا','ب','ا','ا',
      'م','ل','و','ح','ف'
    ] 
  },
  { 
    words:["مقابر","فراعنة","جيزة","هرم","خوفو","غُرف"], 
    letters:[
      'م','ج','ي','ز','ة',
      'ق','ه','ر','م','خ',
      'ا','غُ','و','ف','و',
      'ب','ر','ف','ة','ن',
      'ر','ف','ر','ا','ع'
    ] 
  },
  { 
    words:["الأقصى","زيتون","غزة","شهداء","مقاومة"], 
    letters:[
      'ز','غ','ز','ة','ش',
      'ي','أ','ق','ص','ه',
      'ت','ل','ا','ى','د',
      'و','م','ق','ا','ا',
      'ن','ة','م','و','ء'
    ] 
  },
  { 
    words:["رونالدو","سبعة","نجم","مدريد","برتغال"], 
    letters:[
      'ل','ا','ر','و','ن',
      'م','غ','ت','ر','ا',
      'د','ر','ي','ب','ل',
      'ج','ن','د','و','د',
      'م','س','ب','ع','ة'
    ] 
  },
  { 
    words:["برج","إيفل","فرنسا","باريس","رمز","سياحة"], 
    letters:[
      'ا','ح','ة','ف','ر',
      'ي','ب','ا','س','ن',
      'س','ر','ر','ا','ب',
      'ز','م','ي','س','ر',
      'إ','ي','ف','ل','ج'
    ] 
    },

  { 
    words:["تفاحة","أخضر","صحي","نيوتن","أدم","فاكهة"], 
    letters:[
      'ف','ا','ن','ي','و',
      'أ','ك','ه','ة','ت',
      'د','ص','ت','ف','ن',
      'م','ح','ي','ا','ح',
      'أ','خ','ض','ر','ة'
    ] 
  },
  { 
    words:["ببجي","لعبة","فريق","صينية","تعاون","حرب"], 
    letters:[
      'ت','ق','ي','ر','ف',
      'ع','ل','ع','ب','ة',
      'ا','و','ن','ب','ب',
      'ح','ة','ي','ن','ج',
      'ر','ب','ص','ي','ي'
    ] 
  },
  { 
    words:["فضيحة","برشلونة","بايرن","دوريأبطال"], 
    letters:[
      'ف','ض','ي','ح','ة',
      'د','و','ر','ب','ر',
      'ال','ط','ي','ل','ش',
      'ب','ب','أ','و','ن',
      'ا','ي','ر','ن','ة'
    ] 
  },
  { 
    words:["طابعة","ورق","حبر","ليزر","نسخ","مستندات"], 
    letters:[
      'ط','ا','ب','ع','ح',
      'و','ر','ق','ة','ب',
      'ل','م','س','ت','ر',
      'ي','ز','ر','ن','ت',
      'ن','س','خ','د','ا'
    ] 
    },
{ 
    words:["قمر","ليل","ضوء","هلال","بدر","خسوف","أبولو"], 
    letters:[
      'خ','ض','و','ه','ق',
      'س','و','ء','ل','م',
      'و','ل','و','ا','ر',
      'ف','أ','ب','ل','ل',
      'ب','د','ر','ل','ي'
    ] 
  },
  { 
    words:["محمد","رسول","نبي","وحي","قرآن","سُنة","صادق"], 
    letters:[
      'ة','ص','ا','د','ق',
      'ن','م','ح','م','د',
      'سُ','و','س','ر','و',
      'ن','ل','ي','ب','ح',
      'آ','ر','ق','ن','ي'
    ] 
  },
  { 
    words:["ثقافة","تاريخ","وطنعربي","حضارة","نفط"], 
    letters:[
      'ف','ط','ض','ح','ث',
      'ن','ي','ا','ر','ق',
      'و','ب','ت','ة','ا',
      'ط','ر','ا','ة','ف',
      'ن','ع','ر','ي','خ'
    ] 
  },
  { 
    words:["هاتف","شاشة","بطارية","شحن","لمس","أيفون"], 
    letters:[
      'و','ن','ل','م','س',
      'ف','ه','ا','ت','ف',
      'ي','أ','ش','ش','ة',
      'ب','ن','ح','ا','ش',
      'ط','ا','ر','ي','ة'
    ] 
    },
{ 
    words:["الكعبة","قبلة","مكة","صلاة","طواف","مقام"], 
    letters:[
      'ك','ل','ص','ل','ا',
      'ع','ا','ق','ا','ة',
      'ب','ط','م','م','م',
      'ة','و','ا','ف','ك',
      'ق','ب','ل','ة','ة'
    ] 
  },
  { 
    words:["أندرويد","هاتف","نظام","تطبيقات","روبوت"], 
    letters:[
      'ن','ظ','ا','ه','ت',
      'ر','أ','م','ا','ط',
      'و','ن','د','ت','ب',
      'ب','د','ي','ف','ي',
      'وت','ر','و','ات','ق'
    ] 
  },
  { 
    words:["واتساب","تطبيق","دردشة","ميتا","تواصل"], 
    letters:[
      'و','م','ي','ت','ط',
      'ا','ل','ت','ا','ب',
      'ت','ص','ا','و','ي',
      'س','ا','ب','ت','ق',
      'د','ر','د','ش','ة'
    ] 
  },
  { 
    words:["طبيب","ممرض","جراحة","طوارئ","طاقمطبي"], 
    letters:[
      'ي','ة','ح','ا','ر',
      'ب','ط','م','م','ج',
      'ط','ا','ق','م','ر',
      'ب','ي','ب','ط','ض',
      'ط','و','ا','ر','ئ'
    ] 
    },
{ 
    words:["صقر","شاهين","سرعة","طيور","ينقض","فريسة"], 
    letters:[
      'ر','و','ي','ط','ش',
      'ي','ي','ر','ف','ا',
      'ن','س','ن','ي','ه',
      'ق','ة','س','ر','ع',
      'ض','ص','ق','ر','ة'
    ] 
  },
  { 
    words:["أينشتاين","فيزياء","عالم","ذرة","نوبل"], 
    letters:[
      'ع','ف','ي','ز','ي',
      'ا','أ','ي','ن','ا',
      'ل','م','ل','ش','ء',
      'ن','و','ب','ت','ن',
      'ذ','ر','ة','ا','ي'
    ] 
  },
  { 
    words:["فرنسا","مدريد","مدرب","زيدان","نطحة","ريال"], 
    letters:[
      'ف','ر','ن','ط','م',
      'س','ن','ة','ح','د',
      'ا','ال','ز','ي','ر',
      'ر','ي','ان','د','ب',
      'م','د','ر','ي','د'
    ] 
  },
  { 
    words:["عادلإمام","ضحك","ممثل","زعيم","كوميدي"], 
    letters:[
      'ز','م','م','ث','ل',
      'ع','ك','ي','د','ي',
      'ي','و','م','م','ا',
      'م','ض','ح','ك','م',
      'ع','ا','د','ل','إ'
    ] 
    },
  {
    letters: [
      'ف','ن','ز','ي','ا',
      'د','ا','ا','ل','ل',
      'ن','ف','ل','ا','م',
      'ش','ح','و','ن','و',
      'ي','ة','ر','س','م'
    ],
    words: ['دافنشي','لوحة','الموناليزا','فن','رسم']
  },
  {
    letters: [
      'ش','د','ا','ن','ي',
      'ب','ت','م','ض','ا',
      'ك','ن','ب','ر','ل',
      'ة','س','ك','ر','ة',
      'ة','ض','ا','ي','ر'
    ],
    words: ['تنس','شبكة','رياضة','دانيال','مضرب','كرة']
  },
  {
    letters: [
      'م','ي','ك','ل','ب',
      'ي','ا','ع','م','و',
      'ق','ء','ا','ل','ن',
      'د','ز','و','ي','ل',
      'و','ة','ذ','ر','ة'
    ],
    words: ['زويل','ذرة','قدوة','نوبل','عالم','كيمياء']
  },
  {
    letters: [
      'ر','ح','ل','ة','ب',
      'ط','ر','ك','ا','م',
      'ا','ف','ر','ا','ط',
      'ئ','س','ت','ر','ة',
      'ر','ة','ذ','ك','ر'
    ],
    words: ['طائرة','تذكرة','مطار','سفر','رحلة','ركاب']
  },
  {
    letters: [
      'ب','ع','ظ','م','ى',
      'ر','ل','ي','ن','ر',
      'أ','ل','م','ا','ل',
      'ة','ا','ن','ن','ت',
      'ي','ز','ا','ي','ه'
    ],
    words: ['ألمانيا','هتلر','نازية','برلين','عظمى']
  },
  {
    letters: [
      'ف','ض','ا','ء','م',
      'ك','و','ا','ر','ج',
      'س','ب','ك','ا','ت',
      'م','م','و','ج','ن',
      'ا','ء','ش','م','س'
    ],
    words: ['فضاء','شمس','مجرات','نجوم','كواكب','سماء']
  },
  {
    letters: [
      'ن','ر','ق','ل','ا',
      'م','ح','ت','ا','ل',
      'ر','أ','ا','ل','و',
      'ا','ن','ي','أ','ط',
      'د','ي','ل','ه','ب'
    ],
    words: ['الأهلي','نادي','القرن','بطولات','أحمر']
  },
  {
    letters: [
      'ص','غ','ي','ر','ع',
      'ن','ع','ت','ق','ا',
      'خ','ت','و','ي','ن',
      'آ','ن','م','ب','ه',
      'م','و','ل','ك','ذ'
    ],
    words: ['توتعنخآمون','ملك','قناع','ذهبي','صغير']
  },
  {
    letters: [
      'م','ه','م','ا','غ',
      'و','ج','ر','ة','م',
      'ر','ص','ر','ل','ح',
      'ب','ق','ل','ي','ا',
      'ع','ر','أ','ش','ب'
    ],
    words: ['مهجور','رعب','مغامرة','قصر','أشباح','ليل']
  },
  {
    letters: [
      'ا','ن','ن','و','م',
      'ن','م','ع','ج','غ',
      'س','ة','ف','ا','س',
      'أ','ة','ا','ظ','ل',
      'ف','ر','ش','ن','ة'
    ],
    words: ['فرشاة','أسنان','نظافة','مغسلة','معجون']
  },
  {
    letters: [
      'أ','ذ','ي','ن','ض',
      'ض','ع','ق','ن','ب',
      'و','م','ل','ب','ة',
      'خ','د','ع','ض','ل',
      'ض','ب','ط','ي','ن'
    ],
    words: ['قلب','نبض','عضو','أذين','بطين','دم','ضخ','عضلة']
  },
  {
    letters: [
      'ق','ن','و','و','ي',
      'ن','ب','ل','ة','ر',
      'ل','ن','ف','ج','ا',
      'ت','ا','ا','ر','ب',
      'ق','د','م','ح','ر'
    ],
    words: ['قنبلة','نووي','انفجار','دمار','قتل','حرب']
  },
  {
    letters: [
      'ة','ح','ص','ب','ا',
      'س','ف','ة','م','ل',
      'ر','ص','ع','ل','ط',
      'د','ل','م','ت','ا',
      'م','و','ا','ج','ب'
    ],
    words: ['فصل','مدرسة','طلاب','حصة','معلم','واجبات']
  },
  {
    letters: [
      'ة','ي','ا','م','ح',
      'م','ا','ن','ل','ق',
      'أ','ة','م','غ','ب',
      'ر','ق','ة','م','ص',
      'س','ف','ت','ا','ه'
    ],
    words: ['بصمة','هاتف','سرقة','حماية','أمان','مغلق']
  },
  {
    letters: [
      'ح','س','ا','ب','ي',
      'ر','ي','ا','ض','ا',
      'ذ','ر','ا','د','ت',
      'ج','م','ع','ل','ة',
      'م','ا','ق','ر','أ'
    ],
    words: ['معادلة','رياضيات','أرقام','حساب','جذر']
  },
  {
    letters: [
      'م','د','ا','ل','أ',
      'س','ج','ر','ه','ز',
      'ت','ج','إ','س','ل',
      'ا','ا','م','ع','ا',
      'ر','ي','خ','ة','م'
    ],
    words: ['الأزهر','جامعة','مسجد','تاريخ','إسلام']
  },
  {
    letters: [
      'و','ظ','ي','ف','ة',
      'ب','م','ل','ة','ي',
      'ت','ع','ت','ر','ق',
      'ك','م','ر','ا','ت',
      'م','و','ظ','ف','ب'
    ],
    words: ['موظف','عمل','مكتب','وظيفة','ترقية','راتب']
  },
  {
    letters: [
      'ا','م','ت','س','ا',
      'ع','ا','ا','م','س',
      'ر','ي','ع','ا','ت',
      'ب','و','د','ز','ى',
      'م','و','س','ي','ق'
    ],
    words: ['سماعات','ايربودز','موسيقى','استماع']
  },
  {
    letters: [
      'س','و','ب','ض','ا',
      'ت','ب','ر','ع','ئ',
      'س','ش','م','س','ل',
      'و','ر','ا','ر','ع',
      'ق','ا','ء','ك','ت'
    ],
    words: ['سوبرماركت','تسوق','شراء','سلع','بضائع']
  },
{
words:["سمكة","قرش","مخيف","أسنان","بحار","مفترس"],
letters: [
'ق','ر','ح','ب','م',
'س','ش','ا','ر','خ',
'م','س','ر','ف','ي',
'ك','ة','ت','ف','م',
'أ','س','ن','ا','ن'
]
},
{
words:["ساعة","حائط","عقارب","معلقة","وقت","زمان"],
letters: [
'ط','ئ','ا','ر','ا',
'ة','ق','ح','ب','ق',
'ع','ل','س','ا','ع',
'م','و','ن','ع','ة',
'ت','ق','ا','م','ز'
]
},
{
words:["دبي","القدس","القاهرة","طرابلس","عمان"],
letters: [
'ا','ر','ط','ن','ا',
'ب','س','ة','ع','م',
'ل','د','ر','ه','ا',
'س','ق','ب','د','ق',
'ا','ل','ي','ا','ل'
]
},
{
words:["غار","حراء","وحي","رسالة","إقرأ","جبل","ثور"],
letters: [
'ح','ر','ا','ب','ج',
'و','غ','ء','ل','ث',
'ح','ا','أ','ر','و',
'ي','ر','إ','ق','ر',
'ة','ل','ا','س','ر'
]
},
{
words:["جمل","ناقة","صحراء","سفينة","هجرة","سنام"],
letters: [
'ة','ن','م','ا','ن',
'ف','ي','ق','ة','س',
'س','ن','ا','ه','ج',
'م','ج','ص','ح','ر',
'ل','ء','ا','ر','ة'
]
},
{
words:["أهلي","زمالك","فضيحة","بيبو","بشير","ستة"],
letters: [
'ح','ي','ض','ف','ز',
'ة','ك','ل','ا','م',
'ي','ب','أ','ر','ي',
'ب','ل','ه','ب','ش',
'و','ي','س','ت','ة'
]
},
{
words:["أمريكا","تمثال","الحرية","شعلة","عالي"],
letters: [
'ر','ح','ل','ا','ل',
'ي','ل','ي','ت','ا',
'ة','ا','ا','م','ث',
'ة','ع','ك','ي','أ',
'ل','ع','ش','ر','م'
]
},
{
words:["كسوف","كلي","جزئي","شمس","قمر","ظلام","ظاهرة"],
letters: [
'ر','ظ','ا','ه','رة',
'م','ك','س','ل','ظ',
'ق','ف','و','ا','م',
'ش','ي','ئ','ك','ل',
'م','س','ز','ج','ي'
]
},
{
words:["ذكاءاصطناعي","تطبيق","مساعدة","ذكي"],
letters: [
'ت','ط','ب','ي','ق',
'ك','ذ','ي','س','م',
'ا','ء','ك','ا','ع',
'ص','ا','ذ','ة','د',
'ط','ن','ا','ع','ي'
]
},
{
words:["محمد","عيسى","إبراهيم","موسى","أدم","لوط"],
letters: [
'أ','س','ى','إ','ب',
'د','ي','ع','م','ر',
'م','س','ى','ح','ا',
'م','و','د','م','ه',
'ط','و','ل','م','ي'
]
},
{
words:["فانتازي","نقاط","كابتن","كرةقدم","خطة"],
letters: [
'ك','ا','ب','ن','ق',
'ة','ط','ت','ن','ا',
'م','خ','ر','ك','ط',
'د','ق','ة','ف','ا',
'ي','ز','ا','ت','ن'
]
},
{
words:["جهاز","قياس","ضغط","ممرض","مريض","سماعات"],
letters: [
'م','ر','ي','ض','س',
'ا','ه','ج','ا','م',
'ز','ق','ي','ع','ا',
'ض','ر','ا','ط','ت',
'م','م','س','غ','ض'
]
},
{
words:["حقيبة","ظهر","أدوات","مدرسة","قماش","كتف"],
letters: [
'ت','ا','و','د','أ',
'ا','م','ق','م','د',
'ش','ك','ق','ح','ر',
'ف','ت','ي','ب','س',
'ر','ه','ظ','ة','ة'
]
},
{
words:["كوريا","نووي","زعيم","مستبد","سمين","كيم"],
letters: [
'ن','ي','م','س','م',
'ت','س','م','ك','ي',
'ب','و','و','ن','ا',
'د','ي','ز','ك','ي',
'م','ي','ع','و','ر'
]
},
{
words:["بيانو","موسيقى","عزف","أصابع","مفاتيح"],
letters: [
'ب','ت','ا','ف','م',
'ي','ي','ب','ا','ص',
'ا','ح','ع','ى','أ',
'ن','و','ي','ق','ع',
'م','و','س','ف','ز'
]
},
{
words:["توستر","خبز","فطور","صباح","تحميص","مطبخ"],
letters: [
'ت','ح','م','ي','خ',
'ح','ت','ص','ط','ب',
'ا','و','س','م','خ',
'ب','ص','ت','ر','ب',
'ر','و','ط','ف','ز'
]
},
{
words:["تيكتوك","لايك","مقاطع","لايفات","ترند"],
letters: [
'و','ك','ل','ن','ر',
'ت','ت','ا','د','ت',
'ك','ي','ي','ك','ت',
'ط','ا','ق','م','ا',
'ع','ل','ا','ي','ف'
]
},
{
words:["عسل","أسود","غربة","فيلم","مصري","كوميدي"],
letters: [
'ي','ع','أ','س','و',
'ر','س','غ','ر','د',
'ص','ل','ة','ب','ف',
'م','د','و','ك','ي',
'ي','ي','م','م','ل'
]
},
{
words:["قاموس","كلمات","ترجمة","مرجع","موسوعة"],
letters: [
'ا','ق','ة','م','ج',
'م','و','س','ت','ر',
'ا','ت','ر','ج','ع',
'م','م','و','م','ة',
'ل','ك','س','و','ع'
]
},
{
words:["صلاة","سجود","فروض","ركوع","دعاء","جماعة"],
letters: [
'ة','ص','س','ج','و',
'ا','ل','ف','ر','د',
'ة','ع','ا','و','ر',
'ء','ا','م','ض','ك',
'د','ع','ج','ع','و'
]
},
{
words:["ذهب","ثمين","لامع","نقود","خاتم","حلي","كنز"],
letters: [
'ي','ك','ع','م','ا',
'ل','ن','ز','ذ','ل',
'ح','د','و','ه','ب',
'م','ن','ق','م','ث',
'ت','ا','خ','ي','ن'
]
},
{
words:["ميسي","ماعز","برشلونة","كأسعالم","نجم"],
letters: [
'ا','م','م','ل','ا',
'ع','م','أ','س','ع',
'ز','ي','ك','ن','ة',
'م','س','ي','و','ل',
'ج','ن','ب','ر','ش'
]
},
{
words:["مثلجات","بارد","حار","أيسكريم","نكهات"],
letters: [
'ت','ا','أ','ك','ر',
'م','ج','ي','س','ي',
'ث','ل','ب','ن','م',
'ا','ح','ا','ك','ت',
'ر','د','ر','ه','ا'
]
},
{
words:["مروحة","هواء","كهرباء","صيف","حر","تبريد"],
letters: [
'ت','ص','ي','ء','ء',
'ب','ر','ف','ا','ا',
'ر','ي','د','و','ب',
'ح','ة','ح','ه','ر',
'م','ر','و','ك','ه'
]
},
{
words:["ياسر","الدوسري","شيخ","قارئ","إمام","مكة"],
letters: [
'ا','ل','د','و','س',
'م','ي','ا','ي','ر',
'ا','م','س','ر','خ',
'م','إ','ق','ش','ي',
'ك','ة','ا','ر','ئ'
]
},
{
words:["إعصار","عاصفة","دوامة","رياح","مطر","برق"],
letters: [
'ع','ة','م','ا','و',
'ا','ة','ا','ص','د',
'ص','ف','ر','ع','ر',
'ب','ر','ط','إ','ي',
'ر','ق','م','ح','ا'
]
},
{
words:["دراجة","مقعد","فرامل","إطارات","توازن"],
letters: [
'ن','ت','ا','ر','ا',
'ز','ت','ع','د','ط',
'ا','و','ق','م','إ',
'ا','ر','د','ا','م',
'ج','ة','ف','ر','ل'
]
},
{
words:["غامبول","داروين","غباء","كرتون","سمكة"],
letters: [
'و','ر','غ','ب','ا',
'ي','ا','د','ن','ء',
'ن','س','م','و','ت',
'و','ب','ك','ة','ر',
'ل','م','ا','غ','ك'
]
},
{
words:["لابتوب","حاسوب","دراسة","عمل","بطارية"],
letters: [
'ب','ب','و','س','ا',
'ت','و','ر','د','ح',
'ب','ة','ا','س','ة',
'ا','ي','ط','ب','ع',
'ل','ر','ا','ل','م'
]
},
  {
    words: ['هتلر','يهود','نازي','حرب','إنتحار','شارب'],
    letters: [
      'ن','د','و','ه','ي',
      'ا','ز','ت','ن','إ',
      'ه','ي','ح','ا','ر',
      'ت','ح','ر','ب','ر',
      'ل','ر','ب','ش','ا'
    ]
  },
  {
    words: ['فيل','حيوان','ضخم','أذنين','خرطوم','عشبي'],
    letters: [
      'ن','ي','ب','ش','ع',
      'ي','ل','ي','ف','م',
      'ن','ح','م','خ','و',
      'ذ','ي','ن','ض','ط',
      'أ','و','ا','خ','ر'
    ]
  },
  {
    words: ['فيروس','كورونا','أعراض','وباء','جائحة'],
    letters: [
      'أ','ع','ر','ا','ض',
      'ف','ي','ر','و','و',
      'ئ','ا','ج','س','ب',
      'ح','ا','ن','و','ا',
      'ة','ك','و','ر','ء'
    ]
  },
  {
    words: ['كبد','عضو','سموم','فلترة','زراعة','أدوية'],
    letters: [
      'س','م','ف','ل','ت',
      'أ','و','م','ة','ر',
      'د','ب','د','و','ض',
      'و','ك','ع','ة','ع',
      'ي','ة','ا','ر','ز'
    ]
  },
  {
    words: ['موز','فاكهة','حلو','مغذي','سباطة','صفراء'],
    letters: [
      'م','غ','ذ','ي','ح',
      'ك','ا','ف','و','ل',
      'ه','ة','ء','ط','ا',
      'ف','ر','ا','ة','ب',
      'ص','ز','و','م','س'
    ]
  },
  {
    words: ['حرب','ذكرى','انتصار','سيناء','أسرى','مصر'],
    letters: [
      'ح','ر','ص','ت','ن',
      'ر','ب','ا','ر','ا',
      'ر','ك','م','ص','ى',
      'ى','ذ','أ','س','ر',
      'ء','ا','ن','ي','س'
    ]
  },
  {
    words: ['نادي','ريال','مدريد','إسباني','الملكي'],
    letters: [
      'ي','ر','د','ي','ي',
      'ا','م','د','ر','ن',
      'ل','ك','ي','ب','ا',
      'م','ل','إ','س','ن',
      'ل','ا','ي','د','ا'
    ]
  },
  {
    words: ['البقرة','هود','نوح','مريم','فاطر','طه','سبأ'],
    letters: [
      'د','ا','ل','ب','ق',
      'و','ه','ر','م','ر',
      'ف','ا','ي','أ','ة',
      'ه','ط','م','ب','س',
      'ط','ر','ح','و','ن'
    ]
  },
  {
    words: ['شلال','ماء','انحدار','نهر','طبيعة','سقوط'],
    letters: [
      'ة','ع','ي','ب','ط',
      'ا','ن','ح','د','ا',
      'ل','ا','ل','ش','ر',
      'ر','ط','و','ق','س',
      'ه','ن','ء','ا','م'
    ]
  },
  {
    words: ['حبوب','قمح','محصول','سنابل','طحين','غذاء'],
    letters: [
      'م','ح','ط','ء','غ',
      'ح','ي','ن','ا','ذ',
      'ص','و','ل','م','ق',
      'ل','ن','س','ح','ب',
      'ب','ا','ح','ب','و'
    ]
  },
  {
    words: ['طبيب','مجدي','يعقوب','قلب','السير','مصري'],
    letters: [
      'ب','ي','ر','ص','م',
      'ل','ق','ي','ع','ق',
      'ج','م','ط','ب','و',
      'د','ر','ب','ي','ب',
      'ي','ي','س','ل','ا'
    ]
  },
  {
    words: ['البقرة','الشعراء','يوسف','فصلت','مريم'],
    letters: [
      'م','ر','ق','ر','ة',
      'ا','ي','ل','ب','ت',
      'ل','م','ا','ف','ل',
      'ش','ي','و','س','ص',
      'ع','ر','ا','ء','ف'
    ]
  },
  {
    words: ['مهندس','مباني','معدات','تصميم','مشروع'],
    letters: [
      'م','ي','ن','ا','ب',
      'ه','ن','د','س','م',
      'ت','ي','م','ت','ا',
      'ص','م','م','ع','د',
      'ع','و','ر','ش','م'
    ]
  },
  {
    words: ['رونالدو','الظاهرة','برازيلي','هداف'],
    letters: [
      'ر','ا','ز','ه','د',
      'و','ر','ي','ل','ا',
      'ن','ب','ة','ي','ف',
      'ا','و','ر','ظ','ل',
      'ل','د','ه','ا','ا'
    ]
  },
  {
    words: ['بيتزا','إيطالي','ببروني','طعام','شهية'],
    letters: [
      'ي','ط','ا','ش','ه',
      'إ','ب','ل','ي','ي',
      'م','ي','ت','ز','ة',
      'ا','ع','ط','ا','ب',
      'ي','ن','و','ر','ب'
    ]
  },
  {
    words: ['عقل','مخ','تفكير','دماغ','أعصاب','فكر','وعي'],
    letters: [
      'خ','م','ي','ر','ي',
      'ت','ف','ك','و','ع',
      'م','د','ع','أ','ل',
      'ا','ا','ص','ع','ق',
      'غ','ب','ف','ك','ر'
    ]
  },
  {
    words: ['بنك','مصرف','نقود','سحب','إيداع','أغنياء'],
    letters: [
      'ن','ب','ص','م','ا',
      'ك','ف','ر','ء','ي',
      'س','ق','و','غ','ن',
      'ح','ن','د','أ','إ',
      'ب','ع','ا','د','ي'
    ]
  },
  {
    words: ['مصر','مالي','أنجولا','غانا','تشاد','توجو'],
    letters: [
      'م','ص','ر','ج','ن',
      'ت','د','ل','و','أ',
      'ش','ا','ا','ل','ا',
      'ا','غ','و','ي','م',
      'ن','ا','ج','و','ت'
    ]
  },
  {
    words: ['مثلث','برمودا','لغز','غامض','بوابة','بحر'],
    letters: [
      'ل','ث','م','ب','ا',
      'ث','ب','ح','ة','و',
      'غ','ز','ر','غ','ب',
      'ل','ض','م','ا','ا',
      'ب','ر','م','و','د'
    ]
  },
{
words:["سرير","نوم","راحة","وسائد","منزل","مرتبة"],
letters: [
'ح','ا','و','ئ','د',
'ة','ر','س','ا','م',
'ر','س','م','ل','و',
'ي','م','ن','ز','ن',
'ر','ر','ت','ب','ة'
]
},
{
words:["سيجارة","إدمان","مدخن","تبغ","نيكوتين"],
letters: [
'د','م','ن','ي','ت',
'إ','ا','ن','ك','و',
'س','ي','ج','ي','ن',
'ة','ر','ا','ت','ب',
'ن','خ','د','م','غ'
]
},
{
words:["حرامي","لص","يتسلل","سرقة","تخفي","أموال"],
letters: [
'ت','خ','ف','ي','أ',
'ر','س','ا','و','م',
'ق','ص','ل','ل','ل',
'ة','ل','ي','ت','س',
'ي','م','ا','ر','ح'
]
},
{
words:["نخلة","تمر","جذع","عالية","ظل","جذور","واحة"],
letters: [
'ت','م','ر','ة','ن',
'ل','ظ','ج','ل','خ',
'ة','ع','ذ','ر','و',
'ي','و','ا','ح','ذ',
'ل','ا','ع','ة','ج'
]
},
{
words:["اليابان","طوكيو","أنمي","سوشي","بوذية"],
letters: [
'ي','ش','و','أ','ن',
'ي','ا','س','ي','م',
'ل','ب','ا','ن','ب',
'ا','و','ي','ة','و',
'ط','و','ك','ي','ذ'
]
},
{
words:["حوت","أزرق","عملاق","محيط","صرخة","زعانف"],
letters: [
'أ','ز','ر','ق','م',
'ح','خ','ة','ي','ح',
'و','ر','ع','ط','ق',
'ت','ص','م','ل','ا',
'ف','ن','ا','ع','ز'
]
},
{
words:["شهادتين","صيام","صلاة","الحج","الزكاة"],
letters: [
'ص','ي','ا','م','ش',
'ة','ن','ي','ا','ه',
'ا','ج','ت','د','ة',
'ل','ح','ا','ل','ا',
'ص','ل','ا','ز','ك'
]
},
{
words:["سحابة","مطر","شتاء","تكثف","تبخر","ثقيلة"],
letters: [
'ر','ط','م','ة','ل',
'ت','ش','ث','ق','ي',
'ا','ت','ر','ف','ت',
'ء','ب','خ','ث','ك',
'س','ح','ا','ب','ة'
]
},
{
words:["زراعة","محصول","حرث","فلاح","يزرع","حصاد"],
letters: [
'ح','ز','ر','ا','ع',
'ص','ح','م','ح','ة',
'ا','ص','ث','ر','ف',
'د','و','ل','ح','ل',
'ع','ر','ز','ي','ا'
]
},
{
words:["منطاد","بالون","هواء","طيران","ترفيهي"],
letters: [
'ط','ن','م','ر','ا',
'ا','ن','ط','ي','ن',
'د','و','ل','ر','ت',
'ء','ب','ا','ف','ي',
'ا','و','ه','ي','ه'
]
},
{
words:["قميص","أزرار","قطن","مخطط","مقاس","أكمام"],
letters: [
'ق','ط','ط','خ','م',
'ط','ق','م','ا','س',
'ن','ر','ي','ق','م',
'ر','ا','ص','أ','ك',
'ز','أ','م','ا','م'
]
},
{
words:["مصباح","فكرة","أضواء","كهرباء","فتيلة"],  
letters:[  
'ر','ب','ا','ء','ف',  
'ه','ض','أ','ي','ت',  
'ك','و','ا','ل','ة',  
'ا','ح','ء','ف','ك',  
'ب','ص','م','ة','ر'  
] 
}
];




















function getLevel(idx){
  if (LEVELS[idx]) return LEVELS[idx];
  return { words:[`كلمة${idx+1}`], letters: demoLetters() };
}
/* === State === */
let selCounter = 0;
let levelState = { found:new Set() };
/* === Pages init === */
function initHome(){
  const play = $q('#playBtn');
  if (!play) return;
  play.addEventListener('click', ()=>{
    play.style.transform='translateY(6px) scale(.98)';
    play.style.filter='saturate(1.05)';
    setTimeout(()=>{ play.style.transform=''; play.style.filter=''; },220);
  });
}
function initLevels(){
  const container = $q('#levelsContainer');
  if(!container) return;
  container.innerHTML = '';
  for(let i=1;i<=100;i++){
    const a = document.createElement('a');
    a.className='level-circle';
    a.href = `./level${i}.html`;
    a.textContent = i;
    a.setAttribute('aria-label',`المستوى ${i}`);
    container.appendChild(a);
  }
}

/* === Selection helpers === */
function toggleSelect(btn){
  if (btn.disabled) return;

  const nowSelected = btn.classList.toggle('selected');

  if (nowSelected) {
    btn.dataset.sel = (++selCounter).toString();
  } else {
    btn.dataset.sel = '';
  }
}

/* === التحقق من الكلمة === */
function checkWord(selectedButtons, correctWord) {
  let word = selectedButtons.map(b => b.textContent).join("");

  if (word === correctWord) {
    // الكلمة صح → خلي كل الأزرار تتحول للون الممزوج
    selectedButtons.forEach(btn => {
      btn.style.background = "linear-gradient(135deg, #8B0000, #4682B4)";
      btn.style.color = "#fff";
   
btn.disabled = true;   // يقفل الزرار
btn.classList.remove("selected"); // يشيل التحديد

   btn.style.opacity = "1";
    });
  }
}

function getSelectedInOrder(grid){
  return $qa('.cell.selected',grid).sort((a,b)=>(+a.dataset.sel||0)-(+b.dataset.sel||0));
}


function clearSelection(grid){
  getSelectedInOrder(grid).forEach(c=>{
    c.classList.remove('selected');
    c.dataset.sel = '';
    c.dataset.step = 0;
    COLOR_CLASSES.forEach(cl=>c.classList.remove(cl));

    // دي اللي هتشيل اللون الأحمر وكل الـ inline styles
    c.style.background = "";
    c.style.color = "";
    c.style.opacity = "";
  });
}



function lockSelected(grid){
  getSelectedInOrder(grid).forEach(c=>{
    c.classList.remove('selected');
    c.classList.add('locked');
    c.disabled = true;
    c.setAttribute('aria-pressed','false');
  });
}

/* === Build a level page === */
function initLevelPage(){
  const grid = $q('#grid');
  if(!grid) return;

  // reset state
  selCounter = 0;
  levelState = { found:new Set() };

  // استخرج رقم المستوى من اسم الصفحة
  const m = location.pathname.match(/level(\d+)\.html/i);
  const levelIndex = m ? (parseInt(m[1],10)-1) : 0;
  const { words, letters } = getLevel(levelIndex);

  // بنبني الشبكة
  grid.innerHTML='';
  const L = letters.length>=25 ? letters : demoLetters();
  for(let i=0;i<25;i++){
    const b = document.createElement('button');
    b.type='button';
    b.className='cell';
    b.textContent = L[i];
    b.addEventListener('click', ()=> toggleSelect(b));
    grid.appendChild(b);
  }
  // شريط الأزرار تحت الشبكة
  let controls = $q('#controls');
  if(!controls){
    controls = document.createElement('div');
    controls.id = 'controls';
    grid.parentNode.insertBefore(controls, grid.nextSibling);
  } else {
    controls.innerHTML='';
  }
  // زر حسنا
  const checkBtn = document.createElement('button');
  checkBtn.id='checkBtn';
  checkBtn.textContent='حسنا';
  controls.appendChild(checkBtn);
  // زر إلغاء
  const cancelBtn = document.createElement('button');
  cancelBtn.id='cancelBtn';
  cancelBtn.textContent='إلغاء';
  controls.appendChild(cancelBtn);
// زر تم الجديد (مش ظاهر إلا لما المستوى يخلص)
const doneBtn = document.createElement('button');
doneBtn.id = 'doneBtn';
doneBtn.textContent = 'تم';
doneBtn.style.display = 'none'; 
// ننسخ كل ستايلات زر حسنا حرف حرف
doneBtn.style.padding = '14px 28px';
doneBtn.style.fontSize = '22px';
doneBtn.style.fontWeight = '800';
doneBtn.style.background = 'green';
doneBtn.style.color = '#fff';
doneBtn.style.border = '2px solid #111';
doneBtn.style.borderRadius = '12px';
doneBtn.style.cursor = 'pointer';
// حط الزر جنب controls
controls.appendChild(doneBtn);
// Event للزر تم
doneBtn.addEventListener('click', ()=>{
    const m = location.pathname.match(/level(\d+)\.html/i);
    const levelIndex = m ? (parseInt(m[1],10)-1) : 0;
    localStorage.setItem('level-' + (levelIndex+1), 'done');
    window.location.href = 'levels .html';
});
// تعديل checkBtn لما المستوى يخلص
checkBtn.addEventListener('click', ()=>{
   const selected = getSelectedInOrder(grid);
    if (!selected.length){
        alert('عالمي يا برنس هش على اللي بعده');
        return;
    }
    const done = checkWord(grid, words);
  
  if (done){
        doneBtn.style.display = 'inline-block'; // نعرض الزر تم
        checkBtn.disabled = true;                // حسنا مش شغال
    }
});

  cancelBtn.addEventListener('click', ()=> clearSelection(grid));
}
/* === Check logic: يراجع الحروف اللي انت حددتها بالترتيب === */
function checkWord(grid, words){
  const selected = getSelectedInOrder(grid);
  const picked = selected.map(c=>c.textContent).join('');
  if (!picked){ alert('اختار الحروف الأول يا نجم 😂'); return false; }

  // ماتحسبش نفس الكلمة مرتين
  const target = words.find(w => w === picked && !levelState.found.has(w));

  if (target){
    lockSelected(grid);              // قفل الحروف اللي اخترتها
    levelState.found.add(target);
    alert(`الله عليك! "${target}" صح 🎉`);
  } else {
    alert('لأ، مش هي دي.. جرّب تاني 😅');
    return false;
  }

  // خلّصنا كل كلمات المستوى؟
  const allDone = levelState.found.size === words.length;
  return allDone;
}
/* === Boot === */
document.addEventListener('DOMContentLoaded', ()=>{
  // مهم: اتأكد إن الـ<body> فيه class مناسب
  if (document.body.classList.contains('home-page'))   initHome();
  if (document.body.classList.contains('levels-page')) initLevels();
  if (document.body.classList.contains('level-page'))  initLevelPage();
});

function finishLevel(levelNum){
  // نخزن إن المستوى اتحل
  localStorage.setItem('level-' + levelNum, 'done');

  // نروح على صفحة المستويات
  window.location.href = 'levels .html';
}
// جلب التقدم (أو يبدأ فاضي)
let completedLevels = JSON.parse(localStorage.getItem('completedLevels')) || [];

// تحديث التقدم
function markLevelAsCompleted(levelIndex){
  if(!completedLevels.includes(levelIndex)){
    completedLevels.push(levelIndex);
    localStorage.setItem('completedLevels', JSON.stringify(completedLevels));
  }
}


LEVELS.forEach((lvl, i)=>{
  const btn = document.createElement('a');
  btn.className = 'level-btn';
  btn.innerText = i+1;

  // لو المستوى خلصان
  if(completedLevels.includes(i)){
    btn.style.background = 'green';
    btn.innerText = '✔️ ' + (i+1);
  }

  btn.href = 'level.html?i='+i;
  document.querySelector('.levels-container').appendChild(btn);
});


function initLevels() {
  const container = $q('#levelsContainer');
  if(!container) return;
  container.innerHTML='';

  for(let i=1;i<=100;i++){
    const a = document.createElement('a');
    a.className='level-circle';
    a.href=`level${i}.html`;
    a.textContent=i;

    // لو المستوى اتحل قبل كده
    if(localStorage.getItem('level-'+i) === 'done'){
      a.textContent='✔';
      a.style.background='green';
    }

    container.appendChild(a);
  }
}








